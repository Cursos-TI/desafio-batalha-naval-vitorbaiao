#include <stdio.h>

#define TAM_TABULEIRO 10
#define TAM_HABILIDADE 5
#define TAM_NAVIO 3

// Função para inicializar tabuleiro com 0 (água)
void inicializarTabuleiro(int tabuleiro[TAM_TABULEIRO][TAM_TABULEIRO]) {
    for(int i=0; i<TAM_TABULEIRO; i++) {
        for(int j=0; j<TAM_TABULEIRO; j++) {
            tabuleiro[i][j] = 0;
        }
    }
}

// Função para posicionar um navio horizontal no tabuleiro
void posicionarNavioHorizontal(int tabuleiro[TAM_TABULEIRO][TAM_TABULEIRO], int linha, int coluna) {
    for(int c=coluna; c<coluna + TAM_NAVIO; c++) {
        tabuleiro[linha][c] = 3;
    }
}

// Função para posicionar um navio vertical no tabuleiro
void posicionarNavioVertical(int tabuleiro[TAM_TABULEIRO][TAM_TABULEIRO], int linha, int coluna) {
    for(int l=linha; l<linha + TAM_NAVIO; l++) {
        tabuleiro[l][coluna] = 3;
    }
}

// Preenche matriz de habilidade Cone (5x5)
// Cone aponta para baixo, centro é topo do cone na linha 0, coluna 2
// Exemplo visual:
// 0 0 1 0 0
// 0 1 1 1 0
// 1 1 1 1 1
void criarHabilidadeCone(int habilidade[TAM_HABILIDADE][TAM_HABILIDADE]) {
    for(int i=0; i<TAM_HABILIDADE; i++) {
        for(int j=0; j<TAM_HABILIDADE; j++) {
            // Condição para formar o cone
            // A base do cone cresce a cada linha, centrado na coluna 2
            int centro = TAM_HABILIDADE / 2;
            if(i == 0 && j == centro) {
                habilidade[i][j] = 1;
            } else if(i == 1 && (j >= centro - 1 && j <= centro + 1)) {
                habilidade[i][j] = 1;
            } else if(i == 2 && (j >= centro - 2 && j <= centro + 2)) {
                habilidade[i][j] = 1;
            } else {
                habilidade[i][j] = 0;
            }
        }
    }
}

// Preenche matriz de habilidade Cruz (5x5)
// Centro no meio da matriz (2,2)
// Exemplo visual:
// 0 0 1 0 0
// 0 0 1 0 0
// 1 1 1 1 1
// 0 0 1 0 0
// 0 0 1 0 0
void criarHabilidadeCruz(int habilidade[TAM_HABILIDADE][TAM_HABILIDADE]) {
    int centro = TAM_HABILIDADE / 2;
    for(int i=0; i<TAM_HABILIDADE; i++) {
        for(int j=0; j<TAM_HABILIDADE; j++) {
            if(i == centro || j == centro) {
                habilidade[i][j] = 1;
            } else {
                habilidade[i][j] = 0;
            }
        }
    }
}

// Preenche matriz de habilidade Octaedro (5x5)
// Forma de losango com centro no meio (2,2)
// Exemplo visual:
// 0 0 1 0 0
// 0 1 1 1 0
// 1 1 1 1 1
// 0 1 1 1 0
// 0 0 1 0 0
void criarHabilidadeOctaedro(int habilidade[TAM_HABILIDADE][TAM_HABILIDADE]) {
    int centro = TAM_HABILIDADE / 2;
    for(int i=0; i<TAM_HABILIDADE; i++) {
        for(int j=0; j<TAM_HABILIDADE; j++) {
            // Distância Manhattan do centro
            int dist = abs(i - centro) + abs(j - centro);
            if(dist <= 2) {  // 2 define o raio do losango
                habilidade[i][j] = 1;
            } else {
                habilidade[i][j] = 0;
            }
        }
    }
}

// Sobrepõe a matriz de habilidade ao tabuleiro na posição origem (linha, coluna)
// A matriz de habilidade é centrada na posição (origem)
// Valor 5 representa área afetada pela habilidade
void aplicarHabilidade(int tabuleiro[TAM_TABULEIRO][TAM_TABULEIRO],
                       int habilidade[TAM_HABILIDADE][TAM_HABILIDADE],
                       int origemLinha, int origemColuna) {
    int centro = TAM_HABILIDADE / 2;

    for(int i=0; i<TAM_HABILIDADE; i++) {
        for(int j=0; j<TAM_HABILIDADE; j++) {
            if(habilidade[i][j] == 1) {
                int tabLinha = origemLinha + (i - centro);
                int tabColuna = origemColuna + (j - centro);

                // Verifica limites do tabuleiro
                if(tabLinha >= 0 && tabLinha < TAM_TABULEIRO &&
                   tabColuna >= 0 && tabColuna < TAM_TABULEIRO) {
                    // Marca área de efeito (5) no tabuleiro
                    // Se já tiver navio (3), o valor 5 prevalece para visualização
                    tabuleiro[tabLinha][tabColuna] = 5;
                }
            }
        }
    }
}

// Imprime o tabuleiro formatado com legendas
void imprimirTabuleiro(int tabuleiro[TAM_TABULEIRO][TAM_TABULEIRO]) {
    printf("Tabuleiro Batalha Naval:\n");
    printf("0=agua  3=navio  5=habilidade\n\n");

    for(int i=0; i<TAM_TABULEIRO; i++) {
        for(int j=0; j<TAM_TABULEIRO; j++) {
            printf("%d ", tabuleiro[i][j]);
        }
        printf("\n");
    }
}

int main() {
    int tabuleiro[TAM_TABULEIRO][TAM_TABULEIRO];
    inicializarTabuleiro(tabuleiro);

    // Posicionar dois navios fixos (horizontal e vertical)
    posicionarNavioHorizontal(tabuleiro, 1, 1);
    posicionarNavioVertical(tabuleiro, 4, 7);

    // Criar matrizes de habilidade
    int cone[TAM_HABILIDADE][TAM_HABILIDADE];
    int cruz[TAM_HABILIDADE][TAM_HABILIDADE];
    int octaedro[TAM_HABILIDADE][TAM_HABILIDADE];

    criarHabilidadeCone(cone);
    criarHabilidadeCruz(cruz);
    criarHabilidadeOctaedro(octaedro);

    // Definir pontos de origem das habilidades no tabuleiro
    int origemConeLinha = 2, origemConeColuna = 2;
    int origemCruzLinha = 5, origemCruzColuna = 5;
    int origemOctaedroLinha = 7, origemOctaedroColuna = 7;

    // Aplicar habilidades no tabuleiro
    aplicarHabilidade(tabuleiro, cone, origemConeLinha, origemConeColuna);
    aplicarHabilidade(tabuleiro, cruz, origemCruzLinha, origemCruzColuna);
    aplicarHabilidade(tabuleiro, octaedro, origemOctaedroLinha, origemOctaedroColuna);

    // Imprimir resultado final
    imprimirTabuleiro(tabuleiro);

    return 0;
}